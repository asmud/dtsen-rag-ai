# DTSEN RAG AI - CPU-Only Optimized Environment
# Optimized for CPU-only systems without GPU acceleration
# Copy this to .env for CPU-only systems

# ================================
# Database Configuration
# ================================
DATABASE_URL=postgresql://rag_user:rag_pass@postgres:5432/rag_db
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# ================================
# Vector Store Configuration
# ================================
COLLECTION_NAME=data_rag_kb
VECTOR_DIMENSION=384

# ================================
# LLM Configuration
# ================================
OLLAMA_API=http://ollama-cpu:11434
LLM_MODEL=gemma2:2b
LLM_FALLBACK_MODEL=llama3
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=512
LLM_TIMEOUT=240

# ================================
# Embedding Configuration (CPU optimized)
# ================================
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_FALLBACK_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DEVICE=cpu
EMBEDDING_BATCH_SIZE=32
EMBEDDING_BATCH_SIZE_GPU=16

# ================================
# GPU Resource Management (CPU only)
# ================================
GPU_ENABLED=false
# GPU_DEVICE_ID=  # Not set - defaults to None (CPU-only)
GPU_MEMORY_FRACTION=0.0
CPU_WORKERS=12
MIXED_PRECISION=false

# ================================
# Document Processing
# ================================
MAX_CHUNK_SIZE=512
CHUNK_OVERLAP=50
MAX_FILE_SIZE_MB=50
SUPPORTED_EXTENSIONS=.txt,.md,.pdf,.docx,.html

# ================================
# Web Crawling (crawl4ai)
# ================================
CRAWL_RATE_LIMIT=0.5
CRAWL_TIMEOUT=30
CRAWL_MAX_PAGES=50
CRAWL_USER_AGENT=RAG-Crawler/1.0
CRAWL_RESPECT_ROBOTS=true
CRAWL_MAX_DEPTH=2

# ================================
# API Configuration
# ================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1
API_RELOAD=false
API_LOG_LEVEL=info
CORS_ORIGINS=*

# ================================
# Redis Configuration
# ================================
REDIS_URL=redis://redis:6379/0
REDIS_CACHE_TTL=3600
REDIS_MAX_CONNECTIONS=5

# ================================
# Task Queue Configuration
# ================================
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2
TASK_QUEUE_ENABLED=true

# ================================
# Performance Settings (CPU optimized)
# ================================
ENABLE_CACHING=true
BATCH_PROCESSING=true
ASYNC_PROCESSING=true
MAX_CONCURRENT_REQUESTS=6
REQUEST_TIMEOUT=360

# ================================
# Logging Configuration
# ================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ================================
# Health Check Configuration
# ================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# ================================
# Data Source Configuration
# ================================
DATA_DIR=/app/data
BACKUP_DIR=/app/backups
TEMP_DIR=/tmp/rag

# ================================
# API Integration Settings
# ================================
API_REQUEST_TIMEOUT=30
API_MAX_RETRIES=3
API_RETRY_DELAY=1

# ================================
# MCP (Model Context Protocol) Settings
# ================================
MCP_ENABLED=true
MCP_SERVER_URL=https://jsonplaceholder.typicode.com

# ================================
# Database Query Settings
# ================================
DB_QUERY_ENABLED=true
DB_QUERY_URL=postgresql://rag_user:rag_pass@postgres:5432/rag_db
DB_QUERY_TIMEOUT=30
DB_QUERY_MAX_ROWS=1000

# ================================
# Security Settings
# ================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=3600

# ================================
# Swagger UI Configuration
# ================================
SWAGGER_UI_ENABLED=true
SWAGGER_UI_PATH=/docs
REDOC_PATH=/redoc
OPENAPI_JSON_PATH=/openapi.json
SWAGGER_UI_TITLE=DTSEN RAG AI API Documentation
SWAGGER_UI_DESCRIPTION=Comprehensive API documentation for the DTSEN RAG AI System
API_CONTACT_NAME=DTSEN RAG AI Team
API_CONTACT_EMAIL=support@dtsen-rag-ai.com
API_LICENSE_NAME=MIT
API_LICENSE_URL=https://opensource.org/licenses/MIT

# ================================
# System Prompt Configuration
# ================================
SYSTEM_PROMPT_ENABLED=true
SYSTEM_PROMPT_DEFAULT=You are a helpful AI assistant specializing in Retrieval-Augmented Generation (RAG). Your role is to provide accurate, informative responses based on the provided context from indexed documents.
SYSTEM_PROMPT_MAX_LENGTH=2000
SYSTEM_PROMPT_OVERRIDE_ALLOWED=true
SYSTEM_PROMPT_TEMPLATE_ENABLED=true

# ================================
# Enhanced CPU-Only Optimizations for x86_64
# ================================
DEPLOYMENT_PROFILE=cpu-only-enhanced
ENVIRONMENT=production

# Threading and Performance Optimizations
OMP_NUM_THREADS=6
MKL_NUM_THREADS=6
NUMBA_NUM_THREADS=6
OPENBLAS_NUM_THREADS=6
VECLIB_MAXIMUM_THREADS=6

# x86_64 Specific Optimizations
KMP_AFFINITY=granularity=fine,compact,1,0
KMP_BLOCKTIME=0
KMP_SETTINGS=1

# Memory and Cache Optimizations
MALLOC_ARENA_MAX=4
TORCH_NUM_THREADS=6