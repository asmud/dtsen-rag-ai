# RAG Chatbot Environment Configuration
# Copy this file to .env and modify values as needed

# ================================
# Database Configuration
# ================================
DATABASE_URL=postgresql+psycopg://rag_user:rag_pass@postgres:5432/rag_db
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ================================
# Vector Store Configuration
# ================================
COLLECTION_NAME=rag_kb
VECTOR_DIMENSION=384

# ================================
# LLM Configuration
# ================================
OLLAMA_API=http://ollama:11434
LLM_MODEL=gemma2:2b
LLM_FALLBACK_MODEL=llama3
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=512
LLM_TIMEOUT=60

# ================================
# Embedding Configuration
# ================================
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_FALLBACK_MODEL=BAAI/bge-m3
EMBEDDING_DEVICE=auto
EMBEDDING_BATCH_SIZE=32
EMBEDDING_BATCH_SIZE_GPU=64

# ================================
# GPU Resource Management
# ================================
GPU_ENABLED=true
GPU_DEVICE_ID=
GPU_MEMORY_FRACTION=0.8
CPU_WORKERS=4
MIXED_PRECISION=true

# ================================
# Document Processing
# ================================
MAX_CHUNK_SIZE=512
CHUNK_OVERLAP=50
MAX_FILE_SIZE_MB=100
SUPPORTED_EXTENSIONS=.txt,.md,.pdf,.docx,.html

# ================================
# Web Crawling (crawl4ai)
# ================================
CRAWL_RATE_LIMIT=1.0
CRAWL_TIMEOUT=30
CRAWL_MAX_PAGES=100
CRAWL_USER_AGENT=RAG-Crawler/1.0
CRAWL_RESPECT_ROBOTS=true
CRAWL_MAX_DEPTH=3

# ================================
# API Configuration
# ================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1
API_RELOAD=false
API_LOG_LEVEL=info
CORS_ORIGINS=*

# ================================
# Redis Configuration
# ================================
REDIS_URL=redis://redis:6379/0
REDIS_CACHE_TTL=3600
REDIS_MAX_CONNECTIONS=10

# ================================
# Task Queue Configuration
# ================================
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2
TASK_QUEUE_ENABLED=true

# ================================
# Performance Settings
# ================================
ENABLE_CACHING=true
BATCH_PROCESSING=true
ASYNC_PROCESSING=true
MAX_CONCURRENT_REQUESTS=10
REQUEST_TIMEOUT=300

# ================================
# Logging Configuration
# ================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
# LOG_FILE=/app/logs/rag.log

# ================================
# Health Check Configuration
# ================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# ================================
# Data Source Configuration
# ================================
DATA_DIR=/app/data
BACKUP_DIR=/app/backups
TEMP_DIR=/tmp/rag

# ================================
# API Integration Settings
# ================================
API_REQUEST_TIMEOUT=30
API_MAX_RETRIES=3
API_RETRY_DELAY=1

# ================================
# MCP (Model Context Protocol) Settings
# ================================
MCP_ENABLED=false
# MCP_SERVER_URL=http://mcp-server:8080
# MCP_API_KEY=your_mcp_api_key_here

# ================================
# Database Query Settings
# ================================
DB_QUERY_ENABLED=false
# DB_QUERY_URL=postgresql://user:pass@host:5432/dbname
DB_QUERY_TIMEOUT=30
DB_QUERY_MAX_ROWS=1000

# ================================
# Security Settings
# ================================
# API_KEY=your_api_key_here
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=3600

# ================================
# Swagger UI Configuration
# ================================
SWAGGER_UI_ENABLED=true
SWAGGER_UI_PATH=/docs
REDOC_PATH=/redoc
OPENAPI_JSON_PATH=/openapi.json
SWAGGER_UI_TITLE=RAG Chatbot API Documentation
SWAGGER_UI_DESCRIPTION=Comprehensive API documentation for the Multi-source RAG Chatbot
API_CONTACT_NAME=RAG Chatbot Team
API_CONTACT_EMAIL=support@rag-chatbot.com
API_LICENSE_NAME=MIT
API_LICENSE_URL=https://opensource.org/licenses/MIT

# ================================
# System Prompt Configuration
# ================================
SYSTEM_PROMPT_ENABLED=true
SYSTEM_PROMPT_DEFAULT="You are a helpful AI assistant specializing in Retrieval-Augmented Generation (RAG). Your role is to provide accurate, informative responses based on the provided context from indexed documents. Guidelines: Always base your responses on the provided context when available. If information is not in the context, clearly state this limitation. Provide source citations when possible. Be concise but comprehensive in your explanations. Maintain a professional and helpful tone."
SYSTEM_PROMPT_MAX_LENGTH=2000
SYSTEM_PROMPT_OVERRIDE_ALLOWED=true
SYSTEM_PROMPT_TEMPLATE_ENABLED=true

# ================================
# Development/Production Settings
# ================================
# Set to 'production' for production deployments
ENVIRONMENT=development

# Enable debug mode (development only)
DEBUG=false

# ================================
# External Service Configuration
# ================================

# Custom API endpoints for data ingestion
# API_ENDPOINT_1=https://api.example.com/data
# API_ENDPOINT_1_KEY=your_api_key
# API_ENDPOINT_1_METHOD=GET

# External database for queries
# EXTERNAL_DB_URL=postgresql://user:pass@external-host:5432/external_db
# EXTERNAL_DB_ENABLED=false

# ================================
# Monitoring and Observability
# ================================
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# PROMETHEUS_ENABLED=false
# PROMETHEUS_PORT=9090

# ================================
# Backup and Recovery
# ================================
# BACKUP_ENABLED=false
# BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
# BACKUP_RETENTION_DAYS=30
# S3_BACKUP_BUCKET=your-backup-bucket
# AWS_ACCESS_KEY_ID=your_aws_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret

# ================================
# Feature Flags
# ================================
# Enable/disable specific features
FEATURE_WEB_CRAWLING=true
FEATURE_API_INTEGRATION=true
FEATURE_DATABASE_QUERIES=false
FEATURE_MCP_INTEGRATION=false
FEATURE_BACKGROUND_TASKS=true

# ================================
# Resource Limits (for containerized deployment)
# ================================
# MEMORY_LIMIT=4G
# CPU_LIMIT=2
# DISK_LIMIT=10G

# ================================
# Custom Model URLs (if using custom Ollama deployment)
# ================================
# CUSTOM_MODEL_URL=http://custom-ollama:11434
# CUSTOM_EMBEDDING_API=http://custom-embeddings:8080

# ================================
# Notes
# ================================
# 1. Values without defaults must be set for the application to work
# 2. Boolean values should be 'true' or 'false' (lowercase)
# 3. List values should be comma-separated (e.g., CORS_ORIGINS=http://localhost:3000,http://localhost:3001)
# 4. File paths should be absolute paths in production
# 5. Database URLs should include proper credentials and connection parameters
# 6. For production deployments, ensure all security-related variables are properly configured